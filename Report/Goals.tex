
\documentclass[Report.tex]{subfiles}
%\documentclass{article}
\begin{document}

\begin{figure}
\center
\includegraphics[scale=0.84]{"Goal_plot".pdf}
\caption{Grouped bar chart showing the kinds of attack leading to goals}
\label{Fig:Goal_plot}
\end{figure}

\subsubsection{What-why-how}
\ref{fig:Goal_plot} shows the average sources of goals for every team in the
league. Goals are divided into five categories - Goals from not attacking open
plays, penalties, goals from possession based attacks, goals from quick attacks,
and goals from set plays. 
A grouped bar chart is utilized to clearly show the differences between the
teams. Color hue determines the source of goal, and all values are
percentages. A team's percentages add up to 100, and the bar groups are ordered,
based on the team's rank in the league. 
The purpose of this idiom is to see if there are any noticable correlations
between a team's position in the league, and how they score their goals on
average. 

\subsubsection{Code}
R was used to prepare the data from the excel sheet. The variables in the bar
chart were selected from the dataset, then summed for each team. After this, the
variables were divided with the total number of goals per team, to get the
average distribution of goal sources. 
This was done in a loop, adding variables, variable names and a team's ranking
to predefined lists, and then creating a data frame from these lists. It is more
efficient to create a data frame this way, instead of growing a predefined data
frame inside the loop. 
The order of the groups in the bar chart is determined by the order of the
levels inside the data frame, so these levels had to be reordered based on the
team's ranking.
The chart was then made with ggplot2, with teamnames on the x-axis, the
percentages on the y-axis, and with the different variables as fill (Set plays
etc.)


\end{document}  
